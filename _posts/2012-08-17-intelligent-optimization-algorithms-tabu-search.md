--- 
layout: post
title: 智能优化算法：禁忌搜索
tags: 
- "最优化"
- "禁忌搜索"
status: publish
type: post
published: true
---
禁忌搜索由Fred Glover在1986年首次提出，它是局部邻域搜索算法的推广，模拟人类具有记忆功能的寻优特征，通过局部邻域搜索机制和相应的禁忌准则来避免迂回搜索，并通过破禁水平来释放一些被禁忌的优良状态，进而保证多样化的有效搜索，最终实现全局优化，达到跳出局部最优解的目的。

# 禁忌搜索算法的引入

局部邻域搜索是基于贪婪思想持续地在当前解的邻域中进行搜索（太贪婪、太钻牛犄角了），虽然算法通用易实现，且容易理解，但搜索性能完全依赖于邻域结构和初解（一叶障目，不见泰山啊），很容易陷入局部极小而无法保证全局优化型。

针对局部邻域搜索，为了实现全局优化，要解决的首要问题就是当搜索到局部最优解时不要停止搜索，而应当引导算法跳出局部最优解，进而转向全局最优解。为了达到这个目的，我们之前提到的模拟退火算法通过可控性概率接受劣解来逃逸局部最小；而禁忌搜索算法则采用禁忌策略尽量避免已搜索过的对象（但不是完全隔绝），从而获得更多的搜索空间。

# 禁忌搜索算法的基本思想：一群兔子如何寻找世界最高峰

一群兔子要寻找世界最高山峰，兔子们找到了泰山，它们之中的一只就会留守在这里，其他的再去别的地方寻找。就这样，一大圈后，把找到的几个山峰一一比较，珠穆朗玛峰脱颖而出。

+ 当兔子们再寻找的时候，一般地会有意识地避开泰山，因为他们知道，这里已经找过，并且有一只兔子在那里看着了，这就是禁忌搜索中的<i>“禁忌表（Tabu List）”<i/>；
+ 那只留在泰山的兔子一般不会就安家在那里了，它会在一定时间后重新回到找最高峰的大军，因为这个时候已经有了许多新的消息，泰山毕竟也有一个不错的高度，需要重新考虑，这个归队时间，就是禁忌搜索中的<i>“禁忌长度（Tabu Length）</i>”
+ 如果在搜索的过程中，留守泰山的兔子还没有归队，但是找到的地方全是华北平原等比较低的地方，兔子们就不得不再次考虑选中泰山，也就是说，当一个有兔子留守的地方优越性太突出，超过了“best so far”的状态，就可以不顾及有没有兔子留守，都把这个地方考虑进来，这就是禁忌搜索中的<i>“特赦准则（aspiration criterion）”</i>。

# 禁忌搜索算法的基本流程

给定一个初始解和一种邻域，然后在当前解的邻域中确定若干候选解；若最佳候选解对应的目标值优于“best so far”状态，则忽视其禁忌特性，用其替代当前解和“best so far”状态，并将相应的对象加入禁忌表，同时修改禁忌表中各对象的任期；若不存在上述候选解，则选择在候选解中选择非禁忌的最佳状态为新的当前解，而无视它与当前解的优劣，同时将相应的对象加入禁忌表，并修改禁忌表中各对象的任期；如此重复上述迭代搜索过程，直至满足停止准则。条理化些，则简单禁忌搜索的算法步骤可描述如下：

1. 按照随机方法产生一个初始解作为当前解X，置空禁忌表。
2. 判断算法是否满足终止准则？若是，则停止算法并输出优化结果；否则，继续以下步骤。
3. 利用邻域函数在当前解X的邻域N(X)中选出满足禁忌要求的候选解集C-N(X);
4. 在候选解集C-N(X)中选一个评价值最好的解作为当前解Y=C-N(X)-best。
5. 对候选解判断藐视准则是否满足？若成立，则用满足藐视准则的最佳状态Y替代x成为新的当前解，即X=Y，并用与Y对应的禁忌对象替换最早进入禁忌表的禁忌对象，同时用Y替换“best so far”状态，然后转步骤7；否则，继续以下步骤。
6. 判断候选解对应的各对象的禁忌属性，选择候选解集中非禁忌对象对应的最佳状态为新的当前解，同时用与之对应的禁忌对象替换最早进入禁忌表的禁忌对象元素。
7. 转到步骤2。

可以明显地看到，邻域函数、禁忌对象、禁忌表和藐视准则，构成了禁忌搜索算法的关键。其中，邻域函数沿用局部邻域搜索的思想，用于实现邻域搜索；禁忌表和禁忌对象的设置，体现了算法避免迂回搜索的特点；藐视准则，则是对优良状态的奖励，它是对禁忌策略的一种放松。

# 禁忌搜索的关键参数

+ 禁忌表：是用来存放禁忌对象的一个容器，放入禁忌表中的禁忌对象在解禁之前不能被再次搜索。禁忌表模拟了人的记忆机制，主要目的是阻止搜索过程中出现循环和避免陷入局部最优，进而探索更多搜索空间；
+ 禁忌长度：可以为常数，也可以根据问题的规模确定；
+ 评价函数：可以为直接评价函数，通过目标函数的运算得到评价函数；也可以是间接评价函数，构造其他评价函数替代目标函数（应反映目标函数的特性）减少计算复杂性.
+ 藐视准则：它保证搜索过程在全部候选解被禁或者是有优于当前最优解的候选解被禁时，能够释放特定的解，从而实现全局优化搜索。当一个禁忌移动在随后T次的迭代内再度出现时，如果它能把搜索带到一个从未搜索过的区域，则应该接受该移动即破禁，不受禁忌表的限制。
+ 终止规则：保证算法具有优良的优化性能和时间性能，可以(1)确定步数终止，无法保证解的效果，应记录当前最优解；(2)频率控制原则，当某一个解、目标值或元素序列的频率超过一个给定值时，终止计算；(3)目标控制原则，如果在一个给定步数内，当前最优值没有变化，可终止计算。
