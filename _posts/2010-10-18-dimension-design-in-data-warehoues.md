--- 
layout: post
title: 数据仓库维度设计四部曲
tags: 
- "数据仓库"
- "维度设计"
status: publish
type: post
published: true
---
 做任何事情都要遵循一定的步骤，数据仓库模型的设计也不例外，当我们进行维度设计时，维度建模大师Kimball推荐我们遵循以下四个步骤：

选取要建模的业务处理过程 

      建立的第一个维度模型应该是一个最有影响力的模型，即它应该对最为迫切的业务问题做出回答，并且对于数据的集成而言，相对比较容易。      

      注意，我们将注意力集中到的事业务处理过程而不是业务部门，这样我们可以在企业范围内更经济地保证数据的一致性。确保数据一致性的最佳办法就是对数据进行一次性的发布，维度模型与业务处理过程绑定有利于保证这一点。

定义业务处理过程所涉及事实的粒度 

       粒度在数据仓库生命周期中的一个重要的考虑因素，定义粒度意味着对事实表的行所代表的数据的含义给出明确的说明，粒度决定了事实表度量详细程度的级别。

      粒度的确定受业务问题的驱动，技术条件的制约，如果粒度太大就会丢失细节信息，反之，粒度过小则会需要大量的存储空间和数据聚合时间。因此粒度设计的核心问题在于权衡粒度的级别，对于业务量较大、分析要求比较高的情况下，最佳的解决办法是采用多重粒度的形式。而针对具体的某个事实的粒度而言，为了保证以后可能的分析需求，我们应该优先考虑为业务处理过程获取原子性的信息（即不能再进一步细分的、最详细的信息）而开发维度模型。

选取用于每个事实表的所有维度

      可以通过了解“业务人员如何描述业务过程产生的数据？”之类的问题得到事实表的维度，我们应该用一组健全的维度来装扮事实表，使其能以各种可能的角度观察度量。 

确定用于分析的每个事实表的数字型事实

      可以通过了解“我们要度量、分析什么？”之类的问题得到事实表的事实，事实的粒度应该与之前确定的粒度保持一致，明显属于不同粒度的事实应该放在不同的事实表中。 

      事实分为可加性事实、半可加性事实和非可加性事实。可加性事实如通话时长、销售金额；半可加性事实如账户余额，它可以按照地域维度进行聚集，但是在日期维度上，对账户余额的聚集却毫无意义；非可加性事实如中高端客户数量占比，对于非可加性事实，我们可以将其分子、分母存入事实表。
